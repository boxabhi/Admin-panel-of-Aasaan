{% extends "console/base.html" %}
{% block content %}
<main class="content">

  <div class="container-fluid p-0">

    <div class="row mb-2 mb-xl-3">
      <div class="col-auto d-none d-sm-block">
        <h3><strong> Upload Impact Box </strong></h3>
      </div>
      
            <div class="row">
                <div class="col-12 col-lg-12 col-xxl-12 d-flex">
                    <div class="card flex-fill">
                        <div class="card-header mb-3">

                        
                        </div>

                        <div class="text-right">
                            <button type="button" class="btn btn-primary m-3" data-bs-toggle="modal" data-bs-target="#ImpactUpload">
                                Upload Impact Excel
                              </button>
                              
                        </div>
                   

                        <table class="table table-striped mt-3" >
                            <thead>
                                <tr>
                                    <th scope="col">#</th>
                                    <th scope="col">Is Imported</th>
                                    <th scope="col">Created At</th>
                                    <th scope="col">Action</th>
                                   
                                </tr>
                            </thead>
                            <tbody>
                                {% for data in impact_uploads %}
                                <tr>
                                    <th scope="row">{{forloop.counter}}</th>
                                    <td>
                                      {% if data.is_imported %}
                                          YES
                                      {% else %}
                                      NO
                                      {% endif %}
                                    
                                    </td>
                                    <td>{{data.created_at}}</td>
                                    <td>
                                      <button type="button" class="btn btn-danger" data-bs-toggle="modal" data-bs-target="#exampleModal-{{data.id}}">
                                        <i class="fas fa-trash-alt"></i>
                                      </button>
                                      
                                      <div class="modal fade" id="exampleModal-{{data.id}}" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                        <div class="modal-dialog">
                                          <div class="modal-content">
                                            <div class="modal-header">
                                              <h5 class="modal-title" id="exampleModalLabel">Confirm Delete</h5>
                                              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                            </div>
                                            <div class="modal-body">
                                             Are you sure want to delete?
                                            </div>
                                            <div class="modal-footer">
  
                                              <a href="{% url 'delete_uploaded_impact' data.id %}"   class="btn btn-primary">Delete</a>
                                            </div>
                                          </div>
                                        </div>
                                      </div>
                                      
                                      
                                      <button   {% if data.is_imported %} disabled {% endif  %} onclick="importImpactExcel('{{data.id}}')" class="btn btn-warning">Import</button>

                                    </td>

                                 
                                </tr>
                            {% endfor %}

                            </tbody>
                        </table>
                    </div>
                </div>
            </div>


          </div>

        </div>
      </div>
    </div>
  </div>
</main>




<style>
    #table_id_wrapper{
        margin:10px;
    }
</style>



<div class="modal fade" id="ImpactUpload" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="exampleModalLabel">Upload</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body">
            <div class="form-group">
                <label>Upload Excel</label>
                <input class="form-control" type="file" id="fileupload">
            </div>
        </div>
        <div class="modal-footer">
          <button type="button"  onclick="uploadImpactExcel()" class="btn btn-primary">Upload</button>
        </div>
      </div>
    </div>
  </div>



{% endblock %}